# create .o files from .bmp image files; to be included as RAW data sections
arm-none-eabi-objcopy -I binary -O elf32-littlearm -B arm panda.bmp panda.o
arm-none-eabi-objcopy -I binary -O elf32-littlearm -B arm porkcar.bmp porkcar.o
arm-none-eabi-objcopy -I binary -O elf32-littlearm -B arm pacman.bmp pacman.o
arm-none-eabi-objcopy -I binary -O elf32-littlearm -B arm speedy.bmp speedy.o
arm-none-eabi-objcopy -I binary -O elf32-littlearm -B arm pokey.bmp pokey.o
arm-none-eabi-objcopy -I binary -O elf32-littlearm -B arm shadow.bmp shadow.o
arm-none-eabi-objcopy -I binary -O elf32-littlearm -B arm power.bmp power.o
arm-none-eabi-objcopy -I binary -O elf32-littlearm -B arm mur.bmp mur.o
arm-none-eabi-objcopy -I binary -O elf32-littlearm -B arm point.bmp point.o
arm-none-eabi-objcopy -I binary -O elf32-littlearm -B arm gameover.bmp gameover.o
arm-none-eabi-objcopy -I binary -O elf32-littlearm -B arm gamewon.bmp gamewon.o
arm-none-eabi-objcopy -I binary -O elf32-littlearm -B arm lives.bmp lives.o

# show exported symbols
nm -S -t d panda.o
nm -S -t d gameover.o
nm -S -t d gamewon.o
nm -S -t d lives.o
nm -S -t d porkcar.o
nm -S -t d pacman.o

arm-none-eabi-as -mcpu=arm926ej-s -g ts.s -o ts.o
arm-none-eabi-gcc -c -mcpu=arm926ej-s -std=c99 -g t.c -o t.o
arm-none-eabi-ld -T t.ld ts.o t.o -o t.elf
arm-none-eabi-objcopy -O binary t.elf t.bin

#rm *.o *.elf

echo ready to go?
read dummy

qemu-system-arm -M versatilepb -m 128M -kernel t.bin -serial mon:stdio



 





